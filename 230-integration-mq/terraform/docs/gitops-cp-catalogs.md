
# Cloud Pak Catalogs module

Module to populate a gitops repository with the resources needed to install the operator catalogs required to install IBM Cloud Paks.

Currently, four catalogs are installed:

- IBM Common Services Operator Catalog - `opencloud-operators`
- IBM Operator Catalog - `ibm-operator-catalog`
- IBM Automation Foundation Catalog - `iaf-core-operators`
- IBM Process Mining Catalog - `ibm-automation-processminings`
- IBM DB2U Catalog - `ibm-db2uoperator-catalog`

**Note:** One of the required variable for this module is an IBM Entitlement Key which provides access to the container registry. This value can be retrieved from - https://myibm.ibm.com/products-services/containerlibrary


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers

- gitops (cloud-native-toolkit/gitops)

### Module dependencies

- gitops - [github.com/cloud-native-toolkit/terraform-tools-gitops.git](https://github.com/cloud-native-toolkit/terraform-tools-gitops.git) (>= 1.1.0)

## Example usage

[Refer to examples for more details](test/stages)

```
module "gitops-cp-catalogs" {
  source = "github.com/cloud-native-toolkit/terraform-gitops-cp-catalogs"

  entitlement_key = var.entitlement_key
  git_credentials = module.gitops_repo.git_credentials
  gitops_config = module.gitops_repo.gitops_config
  kubeseal_cert = module.gitops_repo.sealed_secrets_cert
  server_name = module.gitops_repo.server_name
}
```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| gitops_config | Config information regarding the gitops repo structure | true |  | gitops.gitops_config |
| git_credentials | The credentials for the gitops repo(s) | true |  | gitops.git_credentials |
| kubeseal_cert | The certificate/public key used to encrypt the sealed secrets | true |  | gitops.sealed_secrets_cert |
| server_name | The name of the server |  | default | gitops.server_name |
| entitlement_key | The entitlement key used to access the CP4I images in the container registry. Visit https://myibm.ibm.com/products-services/containerlibrary to get the key | true |  |  |


### Outputs

| Name | Description |
|------|-------------|
| name | The name of the module |
| branch | The branch where the module config has been placed |
| namespace | The namespace where the module will be deployed |
| server_name | The server where the module will be deployed |
| layer | The layer where the module is deployed |
| type | The type of module where the module is deployed |
| catalog_ibmoperators | IBM Operator Catalog name |
| catalog_commonservices | IBMCS Operators catalog name |
| catalog_automationfoundation | IAF Core Operators catalog name |
| catalog_processmining | IBM ProcessMining Operators catalog name |
| entitlement_key | Entitlement key |


## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (2.25.4)
